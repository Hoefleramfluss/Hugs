(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[556],{5544:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/page-builder/[slug]",function(){return a(397)}])},5156:function(e,t,a){"use strict";var s=a(4246),r=a(9894),n=a.n(r),i=a(6677);let c=[{href:"/admin/dashboard",label:"Dashboard"},{href:"/admin/products",label:"Products"},{href:"/admin/page-builder",label:"Website Builder"}];t.Z=e=>{let{title:t,children:a}=e,r=(0,i.useRouter)();return(0,s.jsxs)("div",{className:"min-h-screen bg-background text-on-surface",children:[(0,s.jsx)("header",{className:"bg-surface shadow-md",children:(0,s.jsxs)("div",{className:"mx-auto max-w-6xl px-6 py-4 flex items-center justify-between",children:[(0,s.jsx)(n(),{href:"/admin/dashboard",className:"text-2xl font-bold text-primary",children:"HUGS Admin"}),(0,s.jsx)("nav",{className:"flex items-center gap-6",children:c.map(e=>{let t=r.pathname.startsWith(e.href);return(0,s.jsx)(n(),{href:e.href,className:"font-medium transition-colors ".concat(t?"text-primary":"text-on-surface-light hover:text-primary"),children:e.label},e.href)})})]})}),(0,s.jsxs)("main",{className:"mx-auto max-w-6xl px-6 py-10",children:[t&&(0,s.jsx)("h1",{className:"text-3xl font-bold mb-8 text-primary",children:t}),a]})]})}},2289:function(e,t,a){"use strict";a.d(t,{CT:function(){return o},Yu:function(){return p},i2:function(){return h},j7:function(){return u},w1:function(){return d}});var s,r=a(4284);let n=e=>{if(e)return e.trim().replace(/\/+$/,"")},i=n("https://hugs-backend-prod-787273457651.europe-west3.run.app"),c=n(r.env.NEXT_PUBLIC_SITE_URL)||n(r.env.VERCEL_URL),l=Number(null!==(s=r.env.NEXT_REVALIDATE_SECONDS)&&void 0!==s?s:60),o=i||"https://hugs-backend-prod-787273457651.europe-west3.run.app",d=1e3;Number.isFinite(l);let u=(c||"https://hugs.garden").replace(/\/+$/,""),p="Hugs Garden supplies premium growshop equipment, nutrients, and expert advice for thriving indoor gardens.",h="Hugs Garden Growshop | Premium Indoor Gardening Supplies"},397:function(e,t,a){"use strict";a.r(t);var s=a(4246),r=a(6677),n=a(7378),i=a(5156),c=a(8874);let l={hero:{title:"New Hero Title",subtitle:"Add a compelling subtitle"},"product-grid":{title:"Featured Products"}};t.default=()=>{let e=(0,r.useRouter)(),{slug:t}=e.query,[a,o]=(0,n.useState)(null),[d,u]=(0,n.useState)(!1),[p,h]=(0,n.useState)("hero"),[m,x]=(0,n.useState)(null);(0,n.useEffect)(()=>{e.isReady&&"string"==typeof t&&(async()=>{try{let e=await c.ZP.getPageBySlug(t);o(e)}catch(e){console.error("Failed to fetch page",e),x("Could not load this page.")}})()},[e.isReady,t]);let g=(e,t,a)=>{o(s=>s?{...s,sections:s.sections.map(s=>s.id===e?{...s,props:{...s.props,[t]:a}}:s)}:s)},f=e=>{let t=prompt("Enter new property key");t&&g(e,t,"")},b=e=>{o(t=>t?{...t,sections:t.sections.filter(t=>t.id!==e)}:t)},y=async()=>{if(a&&"string"==typeof t)try{u(!0);let e=await c.ZP.updatePageSections(t,a.sections);o(e)}catch(e){console.error("Failed to save page",e),alert("Could not save page. Please try again.")}finally{u(!1)}},j=(0,n.useMemo)(()=>Object.keys(l),[]);return m?(0,s.jsx)(i.Z,{title:"Website Builder",children:(0,s.jsx)("p",{className:"text-red-500",children:m})}):a?(0,s.jsxs)(i.Z,{title:"Editing: ".concat(a.title),children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 mb-8",children:[(0,s.jsxs)("label",{className:"text-sm text-on-surface-light",children:["Add Section:",(0,s.jsxs)("select",{className:"ml-2 border border-surface-light rounded px-2 py-1",value:p,onChange:e=>h(e.target.value),children:[j.map(e=>(0,s.jsx)("option",{value:e,children:e},e)),(0,s.jsx)("option",{value:"custom",children:"Custom"})]})]}),(0,s.jsx)("button",{onClick:()=>{var e;if(!a||"string"!=typeof t)return;let s=Date.now(),r={id:"section-".concat(s),type:p,props:{...null!==(e=l[p])&&void 0!==e?e:{title:"New section"}}};o({...a,sections:[...a.sections,r]})},className:"bg-primary text-white px-4 py-2 rounded hover:bg-primary-dark",children:"Add Section"}),(0,s.jsx)("button",{onClick:y,disabled:d,className:"ml-auto bg-secondary text-background px-4 py-2 rounded hover:opacity-90 disabled:opacity-50",children:d?"Saving...":"Save Page"})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[a.sections.map(e=>(0,s.jsxs)("div",{className:"bg-surface rounded-lg p-6 shadow",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-on-surface-light uppercase tracking-wide",children:"Section"}),(0,s.jsx)("h2",{className:"text-xl font-semibold",children:e.type})]}),(0,s.jsx)("button",{onClick:()=>b(e.id),className:"text-red-500 text-sm hover:underline",children:"Remove"})]}),(0,s.jsx)("div",{className:"space-y-4",children:Object.entries(e.props).map(t=>{let[a,r]=t;return(0,s.jsxs)("label",{className:"block text-sm",children:[(0,s.jsx)("span",{className:"text-on-surface-light uppercase tracking-wide text-xs",children:a}),(0,s.jsx)("input",{className:"mt-1 w-full border border-surface-light rounded px-3 py-2",value:String(r),onChange:t=>g(e.id,a,t.target.value)})]},a)})}),(0,s.jsx)("button",{onClick:()=>f(e.id),className:"mt-4 text-sm text-primary hover:underline",children:"+ Add property"})]},e.id)),0===a.sections.length&&(0,s.jsx)("div",{className:"text-center text-on-surface-light",children:"No sections yet. Use the “Add Section” controls above to get started."})]})]}):(0,s.jsx)(i.Z,{title:"Website Builder",children:(0,s.jsx)("p",{children:"Loading page builder..."})})}},8874:function(e,t,a){"use strict";var s=a(7833),r=a(2289);let n=s.Z.create({baseURL:r.CT,timeout:r.w1,headers:{"Content-Type":"application/json"}});n.interceptors.request.use(e=>{{let t=localStorage.getItem("authToken");t&&e.headers&&(e.headers.Authorization="Bearer ".concat(t))}return e});let i=async e=>(await n.post("/api/auth/login",e)).data,c=async e=>(await n.post("/api/auth/register",e)).data,l=async()=>{let e=await n.get("/api/products");return Array.isArray(e.data)?e.data:[]},o=async e=>(await n.get("/api/products/".concat(e))).data,d=async()=>(await n.get("/api/products/pdw")).data,u=async e=>(await n.post("/api/products/pdw",{productId:e})).data,p=async()=>(await n.get("/api/pages")).data,h=async e=>(await n.get("/api/pages/".concat(e))).data,m=async(e,t)=>(await n.put("/api/pages/".concat(e),{sections:t})).data;t.ZP={login:i,register:c,getProducts:l,getProductBySlug:o,getProductOfWeek:d,setProductOfWeek:u,getPages:p,getPageBySlug:h,updatePageSections:m}},6677:function(e,t,a){e.exports=a(2293)}},function(e){e.O(0,[833,894,888,774,179],function(){return e(e.s=5544)}),_N_E=e.O()}]);