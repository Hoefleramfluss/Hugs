[
  {"path": "backend/prisma/schema.prisma", "reason": "Rebuilt the Prisma data model for users/products/orders/inventory/page builder with JSON fields and enums."},
  {"path": "backend/prisma/migrations/20240101000000_init/migration.sql", "reason": "Regenerated the initial migration SQL so it matches the new schema."},
  {"path": "backend/prisma/seed.ts", "reason": "Implemented idempotent seeding with production safety checks, fallback data, and page builder sections."},
  {"path": "backend/prisma/seed-runner.ts", "reason": "Wrapper to execute the seed script via Prisma without side effects when imported."},
  {"path": "backend/src/routes/pages.ts", "reason": "Replaced in-memory pages with Prisma-backed CRUD and admin auth."},
  {"path": "backend/src/routes/health.ts", "reason": "Added a /api/healthz endpoint for readiness probes and tests."},
  {"path": "backend/src/index.ts", "reason": "Registered the new health route."},
  {"path": "backend/tests/health.test.ts", "reason": "Lightweight Jest test that asserts the health endpoint responds with status ok."},
  {"path": "backend/tests/prisma_seed.test.ts", "reason": "Unit tests that guard the seed safety helpers for prod detection."},
  {"path": "backend/package.json", "reason": "Added seed script alias, pinned Jest config usage, and installed @types/jest for TS tests."},
  {"path": "backend/tsconfig.json", "reason": "Declared Jest types so new test files compile."},
  {"path": "package-lock.json", "reason": "Updated workspace lockfile after installing @types/jest for backend tests."},
  {"path": "constants.ts", "reason": "Aligned repo-wide API base URL fallback with the production Cloud Run endpoint."},
  {"path": "frontend/constants.ts", "reason": "New typed entry point for frontend builds with default API URL and ISR timing."},
  {"path": "frontend/lib/staticProductData.ts", "reason": "Helper that fetches products with graceful fallback during SSG."},
  {"path": "frontend/data/fallback-products.json", "reason": "Static product data used when the backend API is unreachable at build time."},
  {"path": "frontend/services/api.ts", "reason": "Pointed axios client at the new constants module."},
  {"path": "frontend/services/checkout.ts", "reason": "Updated API base import path."},
  {"path": "frontend/services/pageBuilderApi.ts", "reason": "Uses new constants and guards localStorage access for SSR."},
  {"path": "frontend/services/sse.ts", "reason": "Reads EventSource base URL from the centralized constants with fallback."},
  {"path": "frontend/pages/index.tsx", "reason": "SSG now uses build-safe product fetching with static fallback data."},
  {"path": "frontend/pages/product/[slug].tsx", "reason": "Generates paths/props from the fallback-aware helper and keeps ISR stable."},
  {"path": "frontend/next.config.js", "reason": "Injects default NEXT_PUBLIC_API_URL so Next.js builds without local backend."},
  {"path": "frontend/types/index.ts", "reason": "Extended ProductVariant/Section types with attributes/order for new data."},
  {"path": "frontend/e2e/admin-login.spec.ts", "reason": "Playwright smoke test for the admin login flow using a mocked API response."},
  {"path": "ci/run_local_dev.sh", "reason": "One-touch script to start Dockerized Postgres/Redis/mailcatcher, run migrations/seed, and launch both apps."},
  {"path": "ci/deploy_prod.sh", "reason": "Helper that wraps gcloud builds submit with the required substitutions."},
  {"path": "ci/check_post_deploy.sh", "reason": "Reusable smoke-test script for backend health and frontend reachability."},
  {"path": "ci/cloudbuild.yaml", "reason": "Modernized pipeline: npm ci, backend tests, Next build, image builds/pushes, migrations, Cloud Run deploys, smoke tests."},
  {"path": "infra/provider.tf", "reason": "Re-authored provider + API enablement block with explicit versions."},
  {"path": "infra/backend.tf", "reason": "Documented the remote state backend for the Terraform configuration."},
  {"path": "infra/variables.tf", "reason": "Refreshed inputs for region, VPC, SQL, Artifact Registry, and deletion protection."},
  {"path": "infra/cloud_sql.tf", "reason": "Recreated the private Cloud SQL instance + database definition with safe lifecycle policies."},
  {"path": "infra/secret_manager.tf", "reason": "Data sources for all required secrets without rotating values."},
  {"path": "infra/outputs.tf", "reason": "Clear outputs for network links, SQL connection name, connector, Artifact Registry, and secrets map."},
  {"path": "infra/terraform.tfvars.example", "reason": "Sample variable file for operators to copy and customize."},
  {"path": "infra/import_commands.sh", "reason": "Script that prints/imports Terraform state for pre-existing GCP resources."},
  {"path": "infra/terraform-readme.md", "reason": "Updated instructions covering init/import/plan/apply and safety tips."},
  {"path": "README_DEPLOY_STEPS.md", "reason": "End-to-end runbook for local dev, migrations, Terraform, and Cloud Build deploys."}
]
